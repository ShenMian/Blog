# Vim

## 简介

### 是什么

Vim 是一款基于 TUI 的编辑器, 特点是可以只通过键盘使用/高度可自定义. 前者使得 Vim 使用起来十分高效, 后者使得 VIM 可以通过配置添加各种想要的功能.  

Vim(**V**i **im**proved) 最初是为了模仿 Vi, 后面 Vim 加入了许多新功能变成了 Vi 的改进版. 其中包含了不少现代 IDE 具备的基本功能.  

### 怎么学

对于已经熟悉了直观 GUI 的用户来说, Vim 显得不那么友善. 刚开始使用 Vim 的过程会比较坎坷, 因为一些简单的编辑功能需要重新学习. 但在逐渐熟悉操作后, 效率会逐渐提高, 直至超越曾经使用的 GUI.  

Vim 的使用并不复杂, 通过速查表可以看出常用功能并不多. 但需要记忆的内容较多, 需要经常使用才能熟练掌握.  

### 为什么

初始 Vim 的功能远不及其他现代 IDE, 即使高度可自定义也存在很大局限性, 因为其终究是一个基于 TUI 的编辑器. Vim 的高效的键盘使用方案也被其他的现代 IDE 通过插件所支持, 比如 Visual Studio Code 中的 Vim 插件. 因此即使不使用 Vim, 学习 Vim 依然十分有价值.  

其次是 Vim 本身也出现了一个新的替代品 NeoVim, NeoVim 在功能比 Vim 更加完善的情况下减少了约 30% 的代码量. 拥有更活跃的社区和其他诸多优点.  

## 安装

可以借助 [SpaceVim](https://spacevim.org/cn/) 来配置 vim/neovim.  

```sh
sudo pacman -S nvim python-pynvim
curl -sLf https://spacevim.org/cn/install.sh | bash
```

[入门指南](https://spacevim.org/cn/quick-start-guide/) 有配件文件说明和快速搭建适用于不同编程语言环境方法的索引.  

- 打开配置文件: `SPC f v d`, 可以通过修改配置文件 `~/.SpaceVim.d/init.toml` 来启用更多功能或安装插件.
- 更新全部插件: `:SPUpdate`, 对全部已安装的插件进行更新, 包括 SpaceVim 自身.

## 基本用法

![vi/vim shortcuts](assets/vi-keys.gif)  

### 模式

- 普通模式(normal mode).
- 插入模式(insert mode).
- 可视模式(visual mode).
- 命令模式(command mode).

### 普通模式

普通模式是默认的模式, 不同于其他以插入模式作为默认模式的无状态编辑器. 按键被用作以下功能.  

#### 移动光标

| 命令 | 描述                     |
| ---- | ------------------------ |
| h    | 向左移动                 |
| j    | 向下移动                 |
| k    | 向上移动                 |
| l    | 向右移动                 |
| 0    | 移动到行首               |
| $    | 移动到行尾               |
| gg   | 移动到当前文件的第一行   |
| G    | 移动到当前文件最后一行   |
| H    | 移动到当前屏幕的第一行   |
| M    | 移动到当前屏幕的中间     |
| L    | 移动到当前屏幕的最后一行 |

#### 删除内容

| 命令 | 描述                               |
| ---- | ---------------------------------- |
| x    | 删除光标上的当前字符               |
| dd   | 删除一整行                         |
| D    | 删除当行光标之后的内容             |
| C    | 删除光标内容的内容，并进入插入模式 |

#### 插入内容

普通模式使用下列命令将会切换为插入模式.  

| 命令 | 描述                                           |
| ---- | ---------------------------------------------- |
| i    | 在光标左侧进入插入模式                         |
| I    | 在光标所在行的行首输入正文                     |
| a    | 在光标右侧输入内容                             |
| A    | 在光标所在行的行尾输入内容                     |
| o    | 在光标所在的下一行添增内容                     |
| O    | 在光标所在的上一行添增新行, 光标位于新行的行首 |

### 插入模式

该模式也可以理解为 "编辑模式". 在普通模式下执行插入相关操作就会进入插入模式. 按 ESC 回到普通模式.  

### 命令模式

在普通模式下按 `:`/`/` 即可进入命令模式. 按 ESC 回到普通模式.  

| 命令        | 描述                         |
| ----------- | ---------------------------- |
| `:e file`   | 打开文件 `file`              |
| `:w`        | 写入(保存)                   |
| `:q`        | 退出                         |
| `:wq`       | 写入并退出                   |
| `:x`        | 写入并退出, 仅在有修改时写入 |
| `:n`        | 定位到第 `n` 行              |
| `:!command` | 执行命令 `command`           |

### 可视模式

在普通模式下按 `v` 即可进入可视模式. 按 ESC 回到普通模式.  

## 拓展

- [Vim Cheat Sheet](https://vim.rtorr.com/lang/zh_cn)
