# 反汇编器

**英文**: Disassembler.  
**注意**: 由于许多反汇编器已经具备了调试功能, 因此这里反汇编器同时指代反汇编器和调试器.  

- [IDA Pro](https://hex-rays.com/ida-pro/): 可调试, 跨平台, 天价.
- [Radare2](https://github.com/radareorg/radare2): 可调试, 免费, 开源, 命令行.
- [Ghidra](https://github.com/NationalSecurityAgency/ghidra): 可调试, 免费, 开源, 跨平台.
- GDB: 调试器, 可反汇编.
- LLDB: 调试器, 可反汇编.

## IDA Pro

IDA 也提供了只包含部分功能的免费版本 [IDA Free](https://hex-rays.com/ida-free/).  

IDA 的部分键位和大多数软件并不相同, 具体请参考[快捷键](https://www.hex-rays.com/products/ida/support/freefiles/IDA_Pro_Shortcuts.pdf).  

## Radare2

![Radare2](./assets/radare2.png)  

[iaito](https://github.com/radareorg/iaito) 为 Radare2 提供了一个 GUI.  

[安装方法](https://github.com/radareorg/radare2#installation).  

<details>
<summary>快速入门</summary>

1. 启动

    ```bash
    r2 [程序名称]
    r2 -d [程序名称] # 如果想对程序进行调试需添加 -d 选项
    ```

    之后便进入 radar2 内部的命令行.  

2. 分析

    ```bash
    > aaa      # 对全部函数进行分析
    > afl      # 列出全部函数
    > afl~main # 查看包含特定关键字的函数
    ```

    其中 `~` 类似 `| grep `, 可在不同命令中使用.  

3. 反编译

    ```bash
    > s main # 定位到指定函数
    > pdf    # 输出反编译结果
    ```

4. 视觉模式

    ```bash
    V  # 进入视觉模式
    VV # 进入图表模式
    ```

    进入视觉模式后可以按 `p` 进行切换, 按 `V` 进入图表模式, 按 `Shift+!` 进入视觉面板模式, 即可以同时启用多个窗口显示不同内容.  

5. 调试

    | 按键 | 描述     |
    | ---- | -------- |
    | F2   | 设置断点 |
    | F7   | 单步步入 |
    | F8   | 单步步过 |
    | F9   | 执行     |

    ```bash
    > iz             # 输出字符串
    > pf @ [变量名]   # 输出变量的值
    > pf z @ [变量名] # 输出 null-terminated 字符串变量的值
    ```

</details>

## 调试器

前面的列表中给出了具有反编译功能的调试器, 但并不建议使用调试器替代反汇编器. 即使加上插件依然功能有限, 这些调试器更适合与反汇编器搭配使用.  

GDB 与 LLDB 可以对代码进行反汇编, 但只是简单的输出反汇编代码. 可以搭配 Radare2 使用, 同时具备调试和反汇编功能.  
GDB 与 LLDB 所使用的指令是不完全相同的, 请查看[具体区别](https://lldb.llvm.org/use/map.html).  
